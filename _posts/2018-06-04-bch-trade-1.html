---
layout: post
title: 跟我一步一步看懂比特币现金（BCH）的交易（1）
category : Bitcoin
tagline: ""
tags : [bitcoin,BCH,blockchain]
---
{% include JB/setup %}

<div class="dis-editor ui-editor"><h1>前言</h1><hr><p class="p1">这是一篇面向比特币现金初学者的教程，力求用通俗的语言让初学者看懂<span class="s1">BCH</span>的交易。</p><p class="p1">由于理念不同，比特币（<span class="s1">BTC</span>）在<span class="s1">2017</span>年<span class="s1">8</span>月分裂成了<span class="s1">Bitcoin Cash</span>（<span class="s1">BCH</span>）和<span class="s1">Bitcoin Core</span>（<span class="s1">BCE</span>）两条链，其中<span class="s1">BCE</span>占用了<span class="s1">BTC</span>的名字，但由于本人潜意识中认定比特币现金更符合比特币最初的定义（一种点对点的电子现金），所以下文中如果出现“比特币”字样一律指代<span class="s1">BCH</span>，特此说明。</p><p class="p2">本文首发于bch.club，转载请著名作者。</p><p class="p2">本人才疏学浅，如果有什么纰漏，欢迎指正。</p><h1>第一章<span class="s1">. </span>区块</h1><hr><p class="p3"><span class="s2">首先打开以下链接：<a href="https://bch.btc.com/block?date=2018-06-03"><span class="s3">https://bch.btc.com/block</span><span class="s4">?</span><span class="s3">date=2018-06-03</span></a>
    &nbsp;&nbsp;可以看到一个列表：</span></p><p class="p3"><span class="s2"><br></span></p><p class="p2">
    <img src="http://bch.club//data/upload//ueditor/php/upload/image/20180604/1528127878255282.jpeg" title="1528127878255282.jpeg" alt="fullsizeoutput_74a.jpeg" style="width:800px;">
</p><p><br></p><p>列表中每一行记录的就是一个<span class="s1">BCH</span>的“区块”，BCH的区块平均每<span class="s1">10</span>分钟生成一个，每个区块包含这<span class="s1">10</span>分钟内全球所有的<span class="s1">BCH</span>交易，也就是说把这<span class="s1">10</span>分钟内的所有交易打了一个包存了下来，所有这些区块形成一个链条，就成了“区块链”。能够查看区块链信息的网站通常叫做“区块链浏览器”，<span class="s1">BCH</span>的区块链只有一个，但区块链浏览器有很多，比如<span class="s1"> <a href="http://bch.btc.com"><span class="s4">bch.btc.com</span></a> </span>、<span class="s1"> <a href="http://explorer.bitcoin.com"><span class="s5">explorer.bitcoin.com</span></a></span> 、 <a href="http://www.viabtc.com"><span class="s4">www.viabtc.com</span></a> 等。<br></p><p class="p2"><br></p><blockquote><p class="p4"><span class="s6">⚠️</span>Tips<span class="s7">：</span></p><p class="p1">我这里说的“<span class="s1">10</span>分钟”其实不是一个精确的时间，而是一个平均出块儿时间，可能快一点也可能慢一点。交易一旦被打包进一个区块，几乎就无法再篡改了。</p><p class="p1">BCH在全球有很多个“节点”，每个节点都维护着一条完整的区块链数据，这些节点之间是平等的，没有哪个是中心，部分节点下线也不影响BCH网络整体运行，这就是所谓的分布式、去中心化。</p></blockquote><p class="p2"><br></p><h2>下面介绍一下区块列表中每一列的含义：</h2><p class="p2"><br></p><ul class=" list-paddingleft-2" style="list-style-type: disc;"><li><p class="p1"><strong>高度：</strong>每个区块有一个唯一的<span class="s1">ID</span>号，称为区块高度，每产生一个新区块，区块高度<span class="s1">+1</span>，第<span class="s1">0</span>号区块称为创世区块，是<span class="s1">2009-01-04 02:15:05</span>诞生的，比特币的创世区块的信息可以在这里查看：<a href="https://bch.btc.com/block/0"><span class="s3">https://bch.btc.com/block/0</span></a></p></li></ul><p class="p2"><br></p><ul class=" list-paddingleft-2" style="list-style-type: disc;"><li><p class="p1"><strong>播报方：</strong>代表这个区块是哪个矿池产生的，区块的产生是全球所有矿机竞争的结果，矿机又分别连接不同的矿池，可想象成同一时刻所有矿机各自解同一道算数题，这道题的答案不是那么好找，需要花费很长时间计算，哪台矿机先找到答案，哪台就能获得一次特权：交易打包权<span class="s1"> — </span>也就是生成一个新的区块。<br><br>矿机越多（准确说是算力越大）的矿池找到问题答案的几率也就越大。当然，打包交易生成新区块这件事要消耗很多能量，没有人会白干，除非有极大的好处，这就要提到比特币的奖励机制：每打包一个区块比特币网络自动产生一些新的比特币奖励给打包区块者，区块中每笔交易也会产生少量的交易手续费奖励给打包区块者，这些奖励将由矿池中所有矿机（按照算力）平分，这一过程和现实世界中的挖金矿很像，所以被形象的称为“挖矿”。。<br><br>矿工<span class="s1">-</span>矿机<span class="s1">-</span>矿场<span class="s1">-</span>矿池<span class="s1"> </span>四者之间的关系可能是这样的：</p></li></ul><p><br></p><p class="p2"><img src="http://bch.club//data/upload//ueditor/php/upload/image/20180604/1528127891933671.jpeg" title="1528127891933671.jpeg" alt="fullsizeoutput_74b.jpeg"></p><p><br></p><ul class=" list-paddingleft-2" style="list-style-type: disc;"><li><p class="p1"><strong>数量：</strong>一个区块打包了多少笔交易，也就是上一个区块生成到当前区块生成这段时间内，全网有多少笔交易，交易量是个很重要的指标，客观地说，<span class="s1">BCH</span>的交易量和<span class="s1">BCE</span>比起来还是非常小的。</p></li></ul><p class="p2"><br></p><ul class=" list-paddingleft-2" style="list-style-type: disc;"><li><p class="p1"><strong>大小：</strong>就是区块的大小，打包的交易越多，区块越大，目前<span class="s1">BCH</span>的区块大小上限是<span class="s1">32M</span>，相当于每秒能处理<span class="s1">100</span>笔交易，现在<span class="s1">BCH</span>一个区块只有几十、一百多<span class="s1">KB</span>，远远没有达到上限。而<span class="s1">BCE</span>的区块大小只有<span class="s1">1M</span>，每秒只能处理<span class="s1">3-4</span>笔交易，<span class="s1">BCE</span>的交易量却是<span class="s1">BCH</span>的<span class="s1">10</span>倍，所以经常导致交易拥堵，矿池会优先打包手续费给的多的交易，用户想要优先打包自己的交易（意味着交易获得公认）必须支付更高的手续费。<br><br>BCE的交易量之所以比BCH大，很大程度上是因为BCE是在“软分叉”的基础上诞生的，从而延续了“比特币”这个名号，其实BCE对比特币底层的改动极大（可以搜索“隔离见证”），可以说完全抛弃了中本聪最初的愿景，Core（BCE核心开发者）及其背后的利益集团锁死主链，目的是把用户赶到不成熟又难用的二层网络（闪电网络）上。只不过大众都是盲从的，很多人只认比特币，根本搞不清BCH和BCE的本质区别，但大众也不是傻子，会盲从一时不会盲从一世，等到BCE主链持续拥堵到不可用时自然会被大众抛弃，这也是为什么一群有识之士要分裂出比特币现金的原因 — 给比特币留下一枚火种。这方面不展开讲了，感兴趣的自行搜索比特币扩容之争。<br><br></p></li><li><p class="p1"><strong>平均交易费：</strong><span class="s1">BCH</span>的平均交易手续费，<span class="s1">BCH</span>的手续费是非常低的，甚至只需人民币<span class="s1">3</span>分钱都可以打包进块，由于一些钱包对<span class="s1">BCH</span>支持的不好，默认的手续费还设的高了，导致用户多花了不必要的钱，还提高了<span class="s1">BCH</span>交易费整体平均值。目前<span class="s1">BCE</span>每笔交易手续费大概在<span class="s1">2</span>块多钱，在17年牛市末期<span class="s1">BCE</span>网络严重拥堵时，甚至达到一笔转账<span class="s1">1</span>万块钱手续费的疯狂程度，相比之下<span class="s1">BCH</span>不拥堵、手续费低的优势尤为明显，这也导致很多应用都从BCE转到了BCH上。</p></li></ul><p class="p2"><br></p><ul class=" list-paddingleft-2" style="list-style-type: disc;"><li><p class="p1"><strong>块收益：</strong>每块矿工获得的<span class="s1">BCH</span>奖励（包括新生成的<span class="s1">BCH</span>和打包的每笔交易的手续费）。最初比特币每挖出一个区块有<span class="s1">50BTC</span>奖励，每四年减半，经过两次减半，目前每个区块产生<span class="s1">12.5</span>个<span class="s1">BCH</span>的奖励，下次减半大概在<span class="s1">2020</span>年<span class="s1">4</span>月发生，那时一个区块只有<span class="s1">6.25</span>个<span class="s1">BCH</span>的奖励。<br><span class="s7"><br></span>为什么同一个矿池的矿机要平分奖励？因为比特币网络挖矿难度非常大（做一个非常复杂的运算），从概率上讲，单凭一台矿机的算力可能<span class="s1">100</span>年也挖不出一个区块，所以需要大家一起协作，分摊风险，不管谁挖出一个新块，大家都一起平分奖励，这些聚在一起挖矿的矿机就形成了矿池（注意矿池并不须要物理上聚在一起，只要连接相同的服务器即可，物理上聚在一起的叫矿场）。</p></li></ul><p class="p2"><br></p><ul class=" list-paddingleft-2" style="list-style-type: disc;"><li><p class="p1"><strong>时间：</strong>矿池记录的出块时间，可以看到每个块儿的间隔时间都不一样，但平均下来应该是<span class="s1">10</span>分钟一个块儿。这里主要是<span class="s1">BCH</span>的动态难度调整算法发挥作用，当算力增长过快时，算法自动提高挖矿难度，算力下降时，减少挖矿难度，以保证平均<span class="s1">10</span>分钟一个块儿，不过到底什么时候出块儿，还有一定的运气成分，运气好可能连续爆块儿，运气不好<span class="s1">40</span>分钟出不来一个块儿。</p></li></ul><p><br></p><p class="p1"><span class="s1">现在点击高度为</span><span class="s2">533125</span><span class="s1">的这个区块，看一下会显示些什么</span><span class="s2"> <a href="https://bch.btc.com/block/533125"><span class="s3">https://bch.btc.com/block/533125</span></a></span></p><p class="p2"><br></p>
    <p class="p3">首先是这个区块的一些摘要信息：</p><p class="p2"><br></p><p>
        <img src="http://bch.club//data/upload//ueditor/php/upload/image/20180605/1528129133884151.png" title="1528129133884151.png" alt="Pasted Graphic 4.png" style="width:800px;"></p><p><br></p><p class="p3">这里重点提一下“确认数”，交易第一次被打包进区块链时，记为得到<span class="s4">1</span>次确认，在此之后，比特币网络每增加一个区块就是对这笔交易增加一次确认，通常认为在达到<span class="s4">6</span>次确认以后这笔交易被永久的写入了区块链，六次确认平均需要<span class="s4">10</span>分钟<span class="s4">*6=1</span>小时左右。</p><p class="p3">比特币网络设计的极为巧妙，导致作恶成本高昂得不偿失，所以很多交易所在交易获得<span class="s4">1</span>次确认时就认为交易真实有效，在一些小额支付场景，<span class="s4">0</span>确认都是非常安全的，这方面如果想进一步了解，可以搜索<span class="s4">51%</span>攻击相关知识。</p><p class="p2">其他一些字段在上面已经介绍过了，另一些字段涉及一些更专业的知识（比如Nonce），感兴趣可以自行研究。<br></p><p><br></p><p>下一章将介绍一下BCH的交易。</p><p><br></p><p><a href="http://bch.club/index.php?app=team&amp;mod=Forum&amp;act=detail&amp;team_id=1&amp;topic_id=74" target="_blank">第二部分：跟我一步一步看懂比特币现金（BCH）的交易（2）</a></p></div>